<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="CpoliceMapper">
	<resultMap type="cProject.movie.vo.CpoliceVO" id="cPoliceMap">
		<id property="policeNo" column="police_no"/>
		<result property="id" column="id"/>
		<result property="cno" column="cno"/>
		<result property="policeDate" column="police_date"/>
		<result property="policeReason" column="police_reason"/>
		<result property="policeResult" column="police_result"/>
	</resultMap>
	<insert id="insertcPolice" parameterType="cProject.movie.vo.CpoliceVO">
        INSERT INTO cpolice (id, cno, police_date, police_reason, police_result)
        VALUES (#{id}, #{cno}, NOW(), #{policeReason}, 0)
    </insert>
    <select id="myPoliceComment" resultMap="cPoliceMap">
		select * from cpolice
		<where>
			and id = #{author}
			<if test="searchType != null and searchType != '' and keyword != null and keyword != ''">
				and ${searchType} like concat('%',#{keyword},'%')
			</if>
		</where>
		order by cno desc
		limit #{offset}, #{limit}
	</select>
	<select id="myPoliceCommentCount" resultType="int">
		select count(*) from cpolice
		<where>
			and id = #{author}
			<if test="searchType != null and searchType != '' and keyword != null and keyword != ''">
				and ${searchType} like concat('%',#{keyword},'%')
			</if>
		</where>
	</select>
</mapper>